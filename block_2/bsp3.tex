  \solution{
The sparse method is a decision procedure for equality logic that computes
equi-satisfiable formulas in propositional logic.

Consider formula $\varphi ^{E}$ in equation logic:%

\begin{displaymath}
  \varphi ^{E}: (x_1 \neq x_2 \lor x_2=x_3 ) \land \big[ (x_2 \neq x_4 \land x_3=x_4
  \land x_4=x_5)
  \lor (x_6 \neq x_5 \land x_6=x_7 \land x_7=x_3)\big]
\end{displaymath}

Then the sets of equality literals and disequality literals of $\varphi ^{E}$
are:

\begin{eqnarray*}
E_{=}
&=&%
\{x_{2}=x_{3,}x_{3}=x_{4},x_{4}=x_{5},x_{6}=x_{7},x_{7}=x_{3}\}
\\
E_{\neq } &=&\{x_{1}\neq x_{2},x_{2}\neq x_{4},x_{6}\neq x_{5}\}
\end{eqnarray*}

It is very often the case, that a given equality logic formula $\varphi ^{E}$
can be simplified. Before reducing $\varphi ^{E}$ to a propositional formula 
$\varphi ^{P}$, we have to do some preprocessing for simplifying the
equality formula $\varphi ^{E}$:

\begin{enumerate}
\item Construct an equality graph $G^{E}(\varphi ^{E})=(V,E_{=},E_{\neq })$:

%TCIMACRO{%
%\TeXButton{Equality graph}{\begin{tikzpicture}[>=latex',line join=bevel,]
%\pgfsetlinewidth{1bp}
%\pgfsetcolor{black}
% \draw [solid] (229.02bp,163.94bp) .. controls (246.01bp,158.42bp) and (274.84bp,149.06bp)  .. (291.75bp,143.56bp);
% \draw [dotted] (305.23bp,124.42bp) .. controls (305.23bp,106.67bp) and (305.23bp,77.061bp)  .. (305.23bp,59.357bp);
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (300.23bp,91.888bp) node {$=$};
% \draw [solid] (102.06bp,91.939bp) .. controls (114.68bp,91.939bp) and (133.03bp,91.939bp)  .. (145.64bp,91.939bp);
% \draw [dotted] (15.5bp,64.726bp) .. controls (15.5bp,79.963bp) and (15.5bp,103.76bp)  .. (15.5bp,119.04bp);
%\draw (10.5bp,91.883bp) node {$=$};
% \draw [dotted] (27.771bp,57.261bp) .. controls (40.992bp,64.894bp) and (61.924bp,76.979bp)  .. (75.262bp,84.68bp);
%\draw (56.516bp,62.97bp) node {$=$};
% \draw [dotted] (168.27bp,80.33bp) .. controls (178.71bp,65.963bp) and (196.38bp,41.636bp)  .. (206.86bp,27.219bp);
%\draw (180.56bp,48.774bp) node {$=$};
% \draw [dotted] (27.771bp,126.62bp) .. controls (40.992bp,118.98bp) and (61.924bp,106.9bp)  .. (75.262bp,99.199bp);
%\draw (56.516bp,120.91bp) node {$=$};
% \draw [solid] (296.62bp,127.32bp) .. controls (279.4bp,103.62bp) and (240.92bp,50.664bp)  .. (223.83bp,27.143bp);
% \draw [dotted] (168.27bp,103.55bp) .. controls (178.71bp,117.92bp) and (196.38bp,142.24bp)  .. (206.86bp,156.66bp);
%\draw (194.56bp,125.1bp) node {$=$};
% \draw [dotted] (229.02bp,19.934bp) .. controls (246.01bp,25.454bp) and (274.84bp,34.822bp)  .. (291.75bp,40.317bp);
%\draw (263.39bp,21.126bp) node {$=$};
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (305bp,45bp) ellipse (14bp and 15bp);
%\draw (305.23bp,44.697bp) node {$x_6$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (305bp,139bp) ellipse (14bp and 15bp);
%\draw (305.23bp,139.18bp) node {$x_7$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (215bp,15bp) ellipse (14bp and 15bp);
%\draw (215.37bp,15.5bp) node {$x_5$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (160bp,92bp) ellipse (14bp and 15bp);
%\draw (159.84bp,91.939bp) node {$x_4$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (215bp,168bp) ellipse (14bp and 15bp);
%\draw (215.37bp,168.38bp) node {$x_3$};
%\end{scope}
%\end{tikzpicture}
%}}%
%BeginExpansion
\begin{tikzpicture}[>=latex',line join=bevel,]
\pgfsetlinewidth{1bp}
\pgfsetcolor{black}
\draw (272.23bp,155.888bp) node {$=$};
 \draw [dotted] (229.02bp,163.94bp) .. controls (246.01bp,158.42bp) and (274.84bp,149.06bp)  .. (291.75bp,143.56bp);
 \draw [dotted] (305.23bp,124.42bp) .. controls (305.23bp,106.67bp) and (305.23bp,77.061bp)  .. (305.23bp,59.357bp);
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (300.23bp,91.888bp) node {$=$};
 \draw [dotted] (168.27bp,80.33bp) .. controls (178.71bp,65.963bp) and (196.38bp,41.636bp)  .. (206.86bp,27.219bp);
\draw (180.56bp,48.774bp) node {$=$};
 \draw [dotted] (168.27bp,103.55bp) .. controls (178.71bp,117.92bp) and (196.38bp,142.24bp)  .. (206.86bp,156.66bp);
\draw (194.56bp,125.1bp) node {$=$};
 \draw [solid] (229.02bp,19.934bp) .. controls (246.01bp,25.454bp) and (274.84bp,34.822bp)  .. (291.75bp,40.317bp);
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (305bp,45bp) ellipse (14bp and 15bp);
\draw (305.23bp,44.697bp) node {$x_6$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (305bp,139bp) ellipse (14bp and 15bp);
\draw (305.23bp,139.18bp) node {$x_7$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (215bp,15bp) ellipse (14bp and 15bp);
\draw (215.37bp,15.5bp) node {$x_5$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (160bp,92bp) ellipse (14bp and 15bp);
\draw (159.84bp,91.939bp) node {$x_4$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (215bp,168bp) ellipse (14bp and 15bp);
\draw (215.37bp,168.38bp) node {$x_3$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (135bp,160bp) ellipse (14bp and 15bp);
\draw (135.37bp,160.38bp) node {$x_2$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (60bp,160bp) ellipse (14bp and 15bp);
\draw (60.37bp,160.38bp) node {$x_1$};
\end{scope}
\end{tikzpicture}
%
%EndExpansion

The equality graph has two contradictory cycles, $%
c_{1}=(x_{2},x_{3},x_{4})$ and $%
c_{2}=(x_{3},x_{4},x_{5},x_{6},x_{7})$.

\item 
Following strictly the rules of the simplification algorithm, the algorithm
replace in this case every literal in the equality formula $\varphi ^{E}$
with \textsc{True}. In order to transform $\varphi ^{E}$ into a
propositional formula $\varphi ^{P}$, we have to make a little trick to
enforce the application of the reduction algorithm. In this case we apply
only one step of the simplification algorithm and replace all literals at
once with \textsc{True}, which are not in the cycles $c_{1}$ and $c_{2}$. So
we get:

\begin{eqnarray*}
\varphi _{1}^{E}:(\text{\textsc{True}}\vee \text{\textsc{True}})\wedge [
(x_{2}\,{\neq}\,x_{4}\wedge x_{3}\,{=}\,x_{4}\wedge x_{4}\,{=}
\,x_{5})\vee \\
(x_{5}\,{\neq}\,x_{6}\wedge x_{6}\,{=}\,x_{7}\wedge x_{3}\,{=}\,x_{7})]
\end{eqnarray*}

\begin{equation*}
\Rightarrow \;\;\varphi _{1}^{E}:(x_{2}\,{\neq}\,x_{4}\wedge x_{3}\,{=}\,x_{4}\wedge x_{4}\,{=}
\,x_{5})\vee \\
(x_{5}\,{\neq}\,x_{6}\wedge x_{6}\,{=}\,x_{7}\wedge x_{3}\,{=}\,x_{7})
\end{equation*}

Then the equality graph $G^{E}(\varphi _{1}^{E})$ looks like:

%TCIMACRO{%
%\TeXButton{Equality graph 1 (variant)}{\begin{tikzpicture}[>=latex',line join=bevel,]
%\pgfsetlinewidth{1bp}
%\pgfsetcolor{black}
% \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
% \draw [dotted] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (63.513bp,144.81bp) node {$=$};
% \draw [dotted] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
%\draw (126.17bp,125.1bp) node {$=$};
% \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
% \draw [dotted] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
%\draw (140.09bp,48.665bp) node {$=$};
% \draw [dotted] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
%\draw (63.347bp,39.126bp) node {$=$};
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,168bp) ellipse (14bp and 15bp);
%\draw (105.36bp,168.38bp) node {$x_8$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (16bp,139bp) ellipse (14bp and 15bp);
%\draw (15.5bp,139.18bp) node {$x_6$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (161bp,92bp) ellipse (14bp and 15bp);
%\draw (160.9bp,91.939bp) node {$x_7$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,15bp) ellipse (14bp and 15bp);
%\draw (105.36bp,15.5bp) node {$x_4$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (15bp,45bp) ellipse (14bp and 15bp);
%\draw (15.5bp,44.697bp) node {$x_5$};
%\end{scope}
%\end{tikzpicture}
%}}%
%BeginExpansion
\begin{tikzpicture}[>=latex',line join=bevel,]
\pgfsetlinewidth{1bp}
\pgfsetcolor{black}
 \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
 \draw [dotted] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (63.513bp,144.81bp) node {$=$};
 \draw [dotted] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
\draw (126.17bp,125.1bp) node {$=$};
 \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
 \draw [dotted] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
\draw (140.09bp,48.665bp) node {$=$};
 \draw [dotted] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
\draw (63.347bp,39.126bp) node {$=$};
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,168bp) ellipse (14bp and 15bp);
\draw (105.36bp,168.38bp) node {$x_8$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (16bp,139bp) ellipse (14bp and 15bp);
\draw (15.5bp,139.18bp) node {$x_6$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (161bp,92bp) ellipse (14bp and 15bp);
\draw (160.9bp,91.939bp) node {$x_7$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,15bp) ellipse (14bp and 15bp);
\draw (105.36bp,15.5bp) node {$x_4$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (15bp,45bp) ellipse (14bp and 15bp);
\draw (15.5bp,44.697bp) node {$x_5$};
\end{scope}
\end{tikzpicture}
%
%EndExpansion

Now we have only the contradictory cycle $c_{2}$, and we can simplify the 
graph $G^{E}(\varphi _{1}^{E})$ once more by replacing all literals with TRUE, 
which are not in the cycle $c_{2}$. So we get a new equality graph 
$G^{E}(\varphi _{2}^{E})$:

%TCIMACRO{%
%\TeXButton{Equality graph 1 (variant)}{\begin{tikzpicture}[>=latex',line join=bevel,]
%\pgfsetlinewidth{1bp}
%\pgfsetcolor{black}
% \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
% \draw [dotted] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (63.513bp,144.81bp) node {$=$};
% \draw [dotted] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
%\draw (126.17bp,125.1bp) node {$=$};
% \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
% \draw [dotted] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
%\draw (140.09bp,48.665bp) node {$=$};
% \draw [dotted] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
%\draw (63.347bp,39.126bp) node {$=$};
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,168bp) ellipse (14bp and 15bp);
%\draw (105.36bp,168.38bp) node {$x_8$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (16bp,139bp) ellipse (14bp and 15bp);
%\draw (15.5bp,139.18bp) node {$x_6$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (161bp,92bp) ellipse (14bp and 15bp);
%\draw (160.9bp,91.939bp) node {$x_7$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,15bp) ellipse (14bp and 15bp);
%\draw (105.36bp,15.5bp) node {$x_4$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (15bp,45bp) ellipse (14bp and 15bp);
%\draw (15.5bp,44.697bp) node {$x_5$};
%\end{scope}
%\end{tikzpicture}
%}}%
%BeginExpansion
\begin{tikzpicture}[>=latex',line join=bevel,]
\pgfsetlinewidth{1bp}
\pgfsetcolor{black}
 \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
 \draw [dotted] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (63.513bp,144.81bp) node {$=$};
 \draw [dotted] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
\draw (126.17bp,125.1bp) node {$=$};
 \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
 \draw [dotted] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
\draw (140.09bp,48.665bp) node {$=$};
 \draw [dotted] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
\draw (63.347bp,39.126bp) node {$=$};
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,168bp) ellipse (14bp and 15bp);
\draw (105.36bp,168.38bp) node {$x_8$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (16bp,139bp) ellipse (14bp and 15bp);
\draw (15.5bp,139.18bp) node {$x_6$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (161bp,92bp) ellipse (14bp and 15bp);
\draw (160.9bp,91.939bp) node {$x_7$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,15bp) ellipse (14bp and 15bp);
\draw (105.36bp,15.5bp) node {$x_4$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (15bp,45bp) ellipse (14bp and 15bp);
\draw (15.5bp,44.697bp) node {$x_5$};
\end{scope}
\end{tikzpicture}
%
%EndExpansion

Recall the theorem,%
\begin{equation*}
\varphi ^{E}\text{ is satisfiable }\Leftrightarrow e(\varphi ^{E})\AND B_{t}%
\text{ is satisfiable,}
\end{equation*}

where $e(\varphi ^{E})$ denotes the \textit{propositional skeleton} of $%
\varphi ^{E}$and $B_{t}$ is a formula that describes the \textit{%
transitivity constraints} (conjunctions of implications).

So $\varphi ^{P}=e(\varphi ^{E})\AND B_{t}$ is equi-satisfiable to $\varphi
^{E}$, iff $\varphi ^{E}$ is satisfiable.

\bigskip
\item First we construct the propositional skeleton of $\varphi _{2}^{E}$ by
replacing each atom of the form $x_{i}=x_{j}$ in $\varphi _{2}^{E}$ with $%
e_{i,j}$, such that:%
\begin{equation*}
e(\varphi _{2}^{E})=(e_{3,4}\AND e_{4,5})\OR(\lnot e_{5,6}\AND e_{1,6} \AND 
e_{3,7})
\end{equation*}

\item Construct the nonpolar equality graph $G_{NP}^{E}(\varphi _{2}^{E})$:

%TCIMACRO{%
%\TeXButton{Nonpolar equality graph}{\begin{tikzpicture}[>=latex',line join=bevel,]
%\pgfsetlinewidth{1bp}
%\pgfsetcolor{black}
% \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
% \draw [solid] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
% \draw [solid] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
% \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
% \draw [solid] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
% \draw [solid] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,168bp) ellipse (14bp and 15bp);
%\draw (105.36bp,168.38bp) node {$x_8$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (16bp,139bp) ellipse (14bp and 15bp);
%\draw (15.5bp,139.18bp) node {$x_6$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (161bp,92bp) ellipse (14bp and 15bp);
%\draw (160.9bp,91.939bp) node {$x_7$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,15bp) ellipse (14bp and 15bp);
%\draw (105.36bp,15.5bp) node {$x_4$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (15bp,45bp) ellipse (14bp and 15bp);
%\draw (15.5bp,44.697bp) node {$x_5$};
%\end{scope}
%\end{tikzpicture}
%}}%
%BeginExpansion
\begin{tikzpicture}[>=latex',line join=bevel,]
\pgfsetlinewidth{1bp}
\pgfsetcolor{black}
 \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
 \draw [solid] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
 \draw [solid] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
 \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
 \draw [solid] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
 \draw [solid] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,168bp) ellipse (14bp and 15bp);
\draw (105.36bp,168.38bp) node {$x_8$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (16bp,139bp) ellipse (14bp and 15bp);
\draw (15.5bp,139.18bp) node {$x_6$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (161bp,92bp) ellipse (14bp and 15bp);
\draw (160.9bp,91.939bp) node {$x_7$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,15bp) ellipse (14bp and 15bp);
\draw (105.36bp,15.5bp) node {$x_4$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (15bp,45bp) ellipse (14bp and 15bp);
\draw (15.5bp,44.697bp) node {$x_5$};
\end{scope}
\end{tikzpicture}
%
%EndExpansion

\item Make $G_{NP}^{E}(\varphi _{2}^{E})$ chordal, using elimination
ordering $(x_{3},x_{4},x_{5},x_{6},x_{7})$:

%TCIMACRO{%
%\TeXButton{Chordal nonpolar equality graph }{\begin{tikzpicture}[>=latex',line join=bevel,]
%\pgfsetlinewidth{1bp}
%\pgfsetcolor{black}
% \draw [solid] (15.5bp,59.46bp) .. controls (15.5bp,77.211bp) and (15.5bp,106.82bp)  .. (15.5bp,124.52bp);
% \draw [solid] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
% \draw [solid] (28.918bp,49.057bp) .. controls (56.617bp,58.057bp) and (119.84bp,78.599bp)  .. (147.51bp,87.59bp);
% \draw [solid] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
% \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
% \draw [solid] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
% \draw [solid] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,168bp) ellipse (14bp and 15bp);
%\draw (105.36bp,168.38bp) node {$x_8$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (16bp,139bp) ellipse (14bp and 15bp);
%\draw (15.5bp,139.18bp) node {$x_6$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (161bp,92bp) ellipse (14bp and 15bp);
%\draw (160.9bp,91.939bp) node {$x_7$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (105bp,15bp) ellipse (14bp and 15bp);
%\draw (105.36bp,15.5bp) node {$x_4$};
%\end{scope}
%\begin{scope}
%\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
%\pgfsetstrokecolor{strokecol}
%\draw (15bp,45bp) ellipse (14bp and 15bp);
%\draw (15.5bp,44.697bp) node {$x_5$};
%\end{scope}
%\end{tikzpicture}
%}}%
%BeginExpansion
\begin{tikzpicture}[>=latex',line join=bevel,]
 \draw [solid] (29.148bp,143.62bp) .. controls (46.136bp,149.14bp) and (74.968bp,158.5bp)  .. (91.878bp,164bp);
 \draw [solid] (28.918bp,49.057bp) .. controls (56.617bp,58.057bp) and (119.84bp,78.599bp)  .. (147.51bp,87.59bp);
 \draw [solid] (152.46bp,103.55bp) .. controls (142.02bp,117.92bp) and (124.35bp,142.24bp)  .. (113.87bp,156.66bp);
 \draw [solid] (28.918bp,134.82bp) .. controls (56.617bp,125.82bp) and (119.84bp,105.28bp)  .. (147.51bp,96.289bp);
 \draw [solid] (113.79bp,27.11bp) .. controls (124.23bp,41.477bp) and (141.91bp,65.803bp)  .. (152.38bp,80.221bp);
 \draw [solid] (91.712bp,19.934bp) .. controls (74.724bp,25.454bp) and (45.892bp,34.822bp)  .. (28.982bp,40.317bp);
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,168bp) ellipse (14bp and 15bp);
\draw (105.36bp,168.38bp) node {$x_8$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (16bp,139bp) ellipse (14bp and 15bp);
\draw (15.5bp,139.18bp) node {$x_6$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (161bp,92bp) ellipse (14bp and 15bp);
\draw (160.9bp,91.939bp) node {$x_7$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (105bp,15bp) ellipse (14bp and 15bp);
\draw (105.36bp,15.5bp) node {$x_4$};
\end{scope}
\begin{scope}
\definecolor{strokecol}{rgb}{0.0,0.0,0.0};
\pgfsetstrokecolor{strokecol}
\draw (15bp,45bp) ellipse (14bp and 15bp);
\draw (15.5bp,44.697bp) node {$x_5$};
\end{scope}
\end{tikzpicture}
%
%EndExpansion

\item Generate the transitivity constraints in $B_{t}$ for every triangle in
the chordal graph $G_{NP}^{E}(\varphi _{2}^{E})$:

\begin{enumerate}
\item $B_{t}=$ \textsc{True}

\item for each triangle $(e_{i,j},e_{j,k},e_{i,k})$ in $G_{NP}^{E}(\varphi
_{2}^{E})$:%
\begin{eqnarray*}
B_{t}=((e_{3,4}\AND e_{4,5}\IMPL e_{3,5})\AND && \\
(e_{3,5}\AND e_{4,5}\IMPL e_{3,4})\AND && \\
(e_{3,4}\AND e_{3,5}\IMPL e_{4,5})\AND && \\
(e_{3,5}\AND e_{5,7}\IMPL e_{3,7})\AND && \\
(e_{3,7}\AND e_{3,5}\IMPL e_{5,7})\AND && \\
(e_{3,7}\AND e_{5,7}\IMPL e_{3,5})\AND && \\
(e_{5,6}\AND e_{6,7}\IMPL e_{5,7})\AND && \\
(e_{6,7}\AND e_{5,7}\IMPL e_{5,6})\AND && \\
(e_{5,6}\AND e_{5,7}\IMPL e_{6,7})) &&
\end{eqnarray*}

Hence, $\varphi ^{E}$ is satisfiable, iff $\varphi ^{P}=e(\varphi _{2}^{E})%
\AND B_{t}$ is satisfiable.
\end{enumerate}
\end{enumerate}


  }