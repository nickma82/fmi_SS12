\solution{
	The algorithm for Ackermann reduction reads the given equality uninterpreted
	formula (EUF) $\varphi $ and transforms it to an equality logic formula $%
	\varphi ^{E}$ such that: 
	\begin{equation*}
	\varphi ^{E}:FC^{E}\IMPL flat^{E},
	\end{equation*}

	where $FC^{E}$ is a conjunction of functional-consistency constraints and $%
	flat^{E}$ is a flattening of $\varphi $.

	Then the next three steps are:

	\begin{enumerate}
	\item[\textit{i)}] numbering the function instances of $\varphi $, s.t.%
	\begin{equation*}
	\varphi :F_{2}\left( F_{1}\left( G_{1}\left( a\right) ,b\right) ,a\right)
	=F_{1}(G_{1}(a),b)\rightarrow \big[F_{3}(x,y)=G_{2}(F_{1}(G_{1}(a),b))\wedge
	G_{3}(F_{4}(a,y))=d\big]
	\end{equation*}

	\item[\textit{ii)}] \textit{flattening} of $\varphi $, s.t.%
	\begin{equation*}
	flat^{E}:f_{2}=f_{1}\rightarrow \big[f_{3}=g_{2}\wedge g_{3}=d\big]
	\end{equation*}

	While we are loosing information through the flattening we have to

	\item[\textit{iii)}] replenish it with functional constrains $FC^{E}$:%
	\begin{equation*}
	FC^{E}(\varphi ):=\bigwedge_{i=1}^{3}\bigwedge_{j=2}^{4}{\ \big(%
	T(arg(F_{i}))=T(arg(F_{j}))\rightarrow f_{i}=f_{j}\big)}
	\end{equation*}

	Calculating the constraints of $F_{i\in \{1,2,3,4\}}$:%
	\begin{equation*}
	\begin{array}{ll}
	i,j: &  \\ 
	1,2: & (g_{1}=f_{1}\wedge b=a)\rightarrow f_{1}=f_{2} \\ 
	1,3: & (g_{1}=x\wedge b=y)\rightarrow f_{1}=f_{3}\newline
	\\ 
	1,4: & (g_{1}=a\wedge b=y)\rightarrow f_{1}=f_{4} \\ 
	2,3: & (f_{1}=x\wedge a=y)\rightarrow f_{2}=f_{3} \\ 
	2,4: & (f_{1}=a\wedge a=y)\rightarrow f_{2}=f_{4} \\ 
	3,4: & (x=a\wedge y=y)\rightarrow f_{3}=f_{4}\newline
	\end{array}%
	\end{equation*}

	Calculating the constraints of $G_{i\in \{1,2,3\}}$:%
	\begin{equation*}
	\begin{array}{ll}
	i,j: &  \\ 
	1,2: & (a=f_{1})\rightarrow g_{1}=g_{2} \\ 
	1,3: & (a=f_{4})\rightarrow g_{1}=g_{3} \\ 
	2,3: & (f_{1}=f_{4})\rightarrow g_{2}=g_{3}%
	\end{array}%
	\end{equation*}

	Build $FC^{E}$ by conjoining the above results:%
	\begin{eqnarray*}
	FC^{E} &:&(g_{1}=f_{1}\wedge b=a)\rightarrow f_{1}=f_{2}\wedge \newline
	\\
	(g_{1} &=&x\wedge b=y)\rightarrow f_{1}=f_{3}\wedge \newline
	\\
	(g_{1} &=&a\wedge b=y)\rightarrow f_{1}=f_{4}\wedge \newline
	\\
	(f_{1} &=&x\wedge a=y)\rightarrow f_{2}=f_{3}\wedge \newline
	\\
	(f_{1} &=&a\wedge a=y)\rightarrow f_{2}=f_{4}\wedge  \\
	(x &=&a\wedge y=y)\rightarrow f_{3}=f_{4}\newline
	\newline
	\wedge  \\
	(a &=&f_{1})\rightarrow g_{1}=g_{2}\wedge \newline
	\\
	(a &=&f_{4})\rightarrow g_{1}=g_{3}\wedge \newline
	\\
	(f_{1} &=&f_{4})\rightarrow g_{2}=g_{3}
	\end{eqnarray*}

	$\Rightarrow \quad \varphi $ is valid iff the resulting equaltity formula $%
	\varphi ^{E}=FC^{E}\IMPL flat^{E}$ is valid.
	
	\end{enumerate}
}